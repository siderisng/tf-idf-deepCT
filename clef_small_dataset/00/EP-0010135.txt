<DOC>
<DOCNO>
EP-0010135
</DOCNO>
<TEXT>
<DATE>
19800430
</DATE>
<IPC-CLASSIFICATIONS>
G06F-13/12 <main>G06F-3/04</main> 
</IPC-CLASSIFICATIONS>
<TITLE>
microprogrammed input/output controller and method for input/output operations.
</TITLE>
<APPLICANT>
siemens agde<sep>siemens aktiengesellschaft berlin und munchen<sep>siemens aktiengesellschaftwittelsbacherplatz 280333 münchende<sep>siemens aktiengesellschaft <sep>
</APPLICANT>
<INVENTOR>
rensch veit dipl-ing<sep>rubner wolfgang dipl-ing<sep>rensch, veit, dipl.-ing.<sep>rubner, wolfgang, dipl.-ing.<sep>rensch, veit, dipl.-ing.melchiorstrasse 14d-8000 münchen 71de<sep>rubner, wolfgang, dipl.-ing.altdorferstrasse 10d-8000 münchen 21de<sep>rensch, veit, dipl.-ing.<sep>rubner, wolfgang, dipl.-ing.  <sep>rensch, veit, dipl.-ing.melchiorstrasse 14d-8000 münchen 71de<sep>rubner, wolfgang, dipl.-ing.altdorferstrasse 10d-8000 münchen 21de<sep>
</INVENTOR>
<ABSTRACT>
1.  micro-programme controlled input/ouptut device (i/o) comprising a plurality of microprocessors which cooperate via local stores (ls) and in which, triggered by a central processing device (cpu) of a data processing system, input/output transfers are automatically executed via the internal interface to the main store (mm) and via external interfaces to a plurality of peripheral device control units which are connected via channels equipped with their own channel control units (ch1 to chn), characterized in that the microprocessors (dvp, avp) which are provided in addition to the channel control units (ch1. . . chn) for the implementation of control and monitoring functions and which operate automatically have access to the main store (mm) independently of one another via a common interface control unit (mint) during the running of the functions which they are assigned, that one of the microprocessors (avf) undertakes the role of function administration, in particular the initiation and conclusion of an input/output transfer, and at least one other of the microprocessors (dvp) undertakes the role of data administration, in particular the control of the actual data exchange between the channel control units (ch1 to chn) and the main store (mm), that in order that the sub-functions may be passed from one microprocessor (e. g.  avp) to the other (e. g.  dvp) and vice versa, in dependence upon the particular progress of the data transfer, only the items of control data required for the purpose are made available in transfer zone (ls3, ls4) of the local store (ls) which is common to the two microprocessors (avp, dvp), and that in order to safeguard the continuous processing of channel commands by the microprocessor (dvp) which executes the data transfer, in particular in the case of command chains, these are made available in the local store (ls) having been previously read out and prepared by the other processor (avp). 
</ABSTRACT>
<DESCRIPTION>
mikorprogratnmgesteuerte ein-/ausgabeeinrichtung und verfahren zum durchführen von ein-/ausgabeo#erationen die erfindung bezieht sich auf eine mikroprogrammgesteu- erte ein-/ausgabeeinrichtung für ein datenverarbeitendes system gemäss dem oberbegriff des hauptanspruches und auf ein verfahren zum durchführen von ein-/ausgabeoperationen mit einer derartigen einrichtung. das ziel fast aller planungen von rechnern ist es, kon kurrenzfähige produkte mit immer höherer betriebssicherheit bei geringeren kosten in kürzerer entwickluggszeit herzustellen. ins auge fallen dabei vor allem die beachtlichen leistungssteigerungen in der elektronischen datenverarbeitung, die bisher bei ständig sinkenden preisen erzielt worden sind. diese fortschritte gründen sich auf mehrere ursachen: dazu zählen zunächst strukturelle massnahmen, wie modularer aufbau oder auch pipeline-strukturen. ein anderer aspekt ist der immer weiter fortschreitende einsatz von programmierten steuerungen anstelle spezialisierter schaltungen, z.b. die weiterentwicklung von mikroprogramml steuerungen. dazu kommen die fortschritte in der technologie, vor allem der halbleitertechnologie, die heute bereits zu integrierten schaltkreisen mit einer vielzahl von logischen funktionen auf einem baustein geführt haben. die genannten einzelaspekte sind sicherlich nicht voneinander unabhängig zu betrachten, so sind manche struktu rellen massnahmen erst durch fortschritte in der technolo gie sinnvoll einsetzbar. bei ei.n-/ausgabeeinrichtungen enes datenverarbeitenden systems haben aber gerade auch strukturelle massnahmen in der bisherigen entwicklung der datenverarbeitungstechnik eine grosse leistungssteigerung bei ein-/ausgabetransfers bewirkt. im zuge dieser entwicklung sind ein-/ausgabeeinrichtungen gegentiber den zentralen verarbeitungseinrichtungen des datenverarbeitenden systems immer selbständiger geworden. sie haben prozessoreigenschaft bekommen und führen von der zentralen verarbeitungseinrichtung des datenverarbeitenden systems nur noch zu initiierende ein-/ausgabetransfers selbständig durch. die abläufe während einer ein-/ausgabeoperation sind dann in form eines kanalprogrammes eindeutig festgelegt, das für di e die ein-/ausgabeeinrichtung zum zeitpunkt der einlei- tung verfügbar wird. von diesem kanalprogramm wird ein kanalbefehl nach dem anderen ausgeführt, wobei jeder einen transfer von daten oder steuerinformationen zwischen einem speicher des datenverarbeitenden systems und den peripheren geräten umfasst. die kommunikation mit einer peripheren einheit wird üblicherweise über eine externe standardschnittstelle durchgeführt. die steuerung dieser externen schnittstelle ist eine wesentliche funktion der ein-/ausgabeeinrichtung. dabei müssen vielfach auch realzeitbedingungen eingehalten werden, besonders dann, wenn der datentransfer nicht von den physikalischen eigenschaften der peripheren geräte, zum beispiel durch puffer, entkoppelt ist. ub#er eine interne schnittstelle verkehrt die ein-/ausgabeeinrichtung mit dem hauptspeicher des datenverarbeitenden systems. die steuerung dieser internen schnittstelle ist eine andere wesentliche funktion der ein-/ausgabeeinrichtung. weiterhin müssen während einer datenübertra- gung die diesen vorgang definierenden parameter aufbe- wahrt werden. in diesem zusammenhang ist häufig auch eine adressrechnung notwendig, wenn z.b. mit virtuellen adressen gearbeitet wird. daneben sind die kanalbefehls- worte zu lesen, zu aktualisieren und es ist ihre ausfüh- rung eizzllleiten. ist der laufende kanalbefehl der letzte eines kanalprogrammes, so muss die ein-/ausgabeein richtung den damit verbundenen ein-/ausgabetransfer abschliessen und dem prozess in der zentralen verarbeitungs- einrichtung, der den ein-/ausgabetransfer hervorgerufen hat, eine entsprechende endemitteilung übergeben. hier sind teilweise auch realzeitbedingungen einzuhalten, beispielsweise muss ein nächster kanalbefehl in der lücke zwischen zwei datenblöcken auf einem plattenspeicher aktualisiert werden. dies ist einfacher zu erreichen, wenn kanalbefehle im voraus gelesen werden, weil dann der einem aktuellen folgende kanalbefehl früher aktualisiert werden kann. die komplexesten funktionen der ein-/ausgabeeinrichtung liegen aber in der aufgabenverwaltung, die
</DESCRIPTION>
<CLAIMS>
patentansprüche 1. mikroprogrammgesteuerte ein-/ausgabeeinrichtung, in der ausgelöst von einer zentralen   verarbeitungseinrichtung    eines datenverarbeitenden systems selbständig ein-/ausgabe   transfers    zwischen einer internen schnittstelle zum   haupt-    speicher und externen schnittstellen zu einer vielzahl peripherer geräte bzw.  peripherer gerätesteuerungen, die über mit eigenen   kanal steuerungen    ausgestattete kanäle angeschlossen sind, durchgeführt werden, d a d u r c h g e k e n n z e i c h n e t, dass neben den kanalsteuerungen   (chl...chh)    für die   ausführung    von steuer- und kontrollfunktionen selbständig arbeitende, im wesentlichen identisch aufgebaute mikroprozessoren (dvp, avp) eingesetzt sind,  von denen einer (avp) die funktionen der   aufgabenverwaltung,    also insbesondere die steuerung der internen schnittstelle zum hauptspeicher   (mm)    und mindestens ein anderer (dvp) die steuerung der externen schnittstellen   übernimmt >       aass    den simultan arbeitenden prozessoren gemeinsam ein   lokal-    speicher (ls) zugeordnet ist, über den sie miteinander kommunizieren und dass jeder prozessor mit einem   sontroll-    speicher   (dcm,    acm) des anderen verbunden ist, um diesen zu aktivieren.      2.    mikroprogrammgesteuerte   ein-/ausgabee'inr'-.chtung    nach anspruch 1, d a d u r c h g e k e n n z e i c h n e t, dass die mikroprozessoren (dvp, avp) ein bussystem   (dbus    bzw. abus) mit einem angeschlossenen internen registersatz (rsd bzw. rsa) und eine verarbeitungseinheit (dpu bzw. apu) mit eigenem schnellspeicher (fm) und arithmetisch logischem rechenwerk (alu), die untereinander über   multwplexer      ¯?er-    bunden sind, aufweisen.      n.      mikroprogrammgesteuerte      ein-/ausgabeeinrichtung    nach anspruch 2, d a d u r c h g e k e n n z e i c h n e t,  dass zum lösen von   speicherzugriffskonflikten    bei   glench-    zeitigen speicheranforderungen dieses   aufgabenverwaltungs    prozessors   (avp)      und    des datenverwaltungsprozessors (dvp) zum lokalspeicher (ls) dem aufgabenverwaltungsprozessor hardwaremässig eine nulloperation   aufgezwungen    wird, so dass sich sein speicherzugriff um einen zyklus verschiebt.   4.   mikropzoor?mmgesteuerte      ein-/ausgabeeinrichtung    nach   anspruch    2 oder 3, d a d u r c h g e k e n n z e i c h n e t,   dass    die mikroprozessoren   (dvp,    avp) zum   adressieren    des lokalspeichers (ls) in ihren registersätzen (rsd bzw.   rsa) je ein register (pard bzw. para) für die laufenden parameter aufweisen, die   zumindestens    teilweise als offene, d. h. ausser über das bussystems (dbus bzw. abus) ständig an weitere   schaltungen    der prozessoren angeschlossene register ausgebildet sind und dass zumindestens das parameterregister   (pard)    des   datenverwaltungsprozesscrs    sowohl über das bussystem als auch unmittelbar über die hardware ladbar ist.   5. mikropgrammgesteuerte   ein-/ausgabeeinn'chtung    nach   4n-    spruch 4, d a d u r c h g e k e n n z e i c h n e t, dass ein prioritätsnetzwerk vorgesehen ist,- das bei gleichzeitigen anforderungen mehrerer kanäle   (ch1...chn)    an den datenverwaltungsprozessor (dvp) den höchstpriorisierten kanal auswählt und seine identifikationsnummer in das parameterregister   (perd)    des datenverwaltungsprozessors überträgt.   6.   mikroprogrammgesteuerte      ein-/ausgabe,eenrichtung    nach einem der ansprüche 4 oder 5, d a d u r c h g e k e n nz e i c h n e t, dass ein   sperrnetzwerk    vorgesehen ist, das die übergabe einer kanalinternen anforderung an den datenverwaltungsprozessor   (dvp)    so lange unterdrückt, bis eine vom datenverwaltungsprozessor an den aufgabenverwaltungsprozessor   (avp)    abgegebene anforderung auf lesen  eines   kanalbefehles    im voraus durch den   aufgabenverwaltungs-    prozessor abgeschlossen ist.   7. verfahren zum durchführen von   ein-/ausgabeoperationen    mit einer   mikroprogrammgesteuerten      ein-/ausgabeeinrichtung    nach einem der ansprüche 1 bis 6, d a d u r c h g e k e n n z e i c h n e t, dass - die zentrale verarbeitungseinrichtung (cpu)zum einleiten einer ein-/ausgabe-operation an den   aufgabenverwaltungs-    prozessor (avp) eine anforderung mit einem befehl   11start    device" mit der adresse eines im hauptspeicher (mm) gespeicherten   kanalprogrammes    übergibt, - der   auftragsverwaltungsprozessor    daraufhin aus dem hauptspeicher parameter und die ersten kanalbefehle des   kanal    programms entsprechend   formatiert    in den lokalspeicher' (ls) überträgt und   anschliessend den datenverwaltungsprozessor (dvp) aktiviert, - der datenverwaltungsprozessor den   betröffenen    kanal   (ch1...         chn)    auswählt, diesen zur adressierung des betroffenen peripheren geräts   aufforderl    und ihm den ersten   kanalbefehl    übergibt, - die steuereinheit des ausgewählten kanals bei einem ausgabebefehl unmittelbar den   datenverwaltungsprozessor      a"if-    fordert, daten in einen   kanalpuff er    zu übertragen, bei einem eingabebefehl jedoch erst, wenn der kanalpuffer durch das periphere gerät gefüllt ist, den datenverwaltungsprozessor   auffordert,    die gepufferten daten in den hauptspeicher zu übertragen, - der datenverwaltungsprozessor in dieser zeit die parameter aktualisiert, d. h.   fortlaufend den   bytezähler    erniedrigt, die adresse erhöht und auch übersetzt, falls eine speicherseite überschritten wird, - der datenverwaltungsprozessor nach dem ausführen eines   ranalbefehls    feststellt, ob eine   befehlskettung    vorliegt und gegebenenfalls den nächsten kanalbefehl aus dem lokalspeicher liest und aufbereitet,   der   auftragsverwaltungsprozessor    zugleich aufgefordert wird,   einen weiteren kanalbefehl des   kanalprogramms    aus dem hauptspeicher in den lokal speicher im voraus zu übertragen, - der datenverwaltungsprozessor am ende eines kanalprogrammes die statusinformation des am transfer beteiligten peripheren geräts im lokalspeicher speichert und dem   auqtragsverwaltungsprozessor    eine endeanforderung übergibt, - und der   auftragsverwaltungsprozessor      darauonin    die statusinformation in den hauptspeicher, sowie der zentralen verarbeitungseinheit die   endeinitteilung    überträgt.  
</CLAIMS>
</TEXT>
</DOC>
