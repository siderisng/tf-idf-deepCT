<DOC>
<DOCNO>
EP-0011892
</DOCNO>
<TEXT>
<DATE>
19800611
</DATE>
<IPC-CLASSIFICATIONS>
G06F-19/00 <main>G06F-15/52</main> G01N-23/22 G01N-23/223 
</IPC-CLASSIFICATIONS>
<TITLE>
automatic energy dispersive x-ray fluorescence analysing apparatus.
</TITLE>
<APPLICANT>
philips corpus <sep>north american±philips corporation<sep>north american philips corporation 100 east 42nd street 9th floor new york, n.y. 10017 us<sep>north american philips corporation  <sep>
</APPLICANT>
<INVENTOR>
carey robert<sep>russ john christian<sep>carey, robert<sep>russ, john christian<sep>carey, robertc/o int. octrooibureau b.v. prof. holstlaan 6nl-5656 aa eindhovennl<sep>russ, john christianc/o int. octrooibureau b.v. prof. holstlaan 6nl-5656 aa eindhovennl<sep>carey, robert<sep>russ, john christian<sep>carey, robertc/o int. octrooibureau b.v. prof. holstlaan 6nl-5656 aa eindhovennl<sep>russ, john christianc/o int. octrooibureau b.v. prof. holstlaan 6nl-5656 aa eindhovennl<sep>
</INVENTOR>
<ABSTRACT>
an improved method and apparatus for obtaining and  displaying sem x-ray line scans and maps for data collection  and presentation in energy dispersive x-ray analysis of mater­ ials, having ratemeter circuitry providing a voltage output  proportional to the intensity of detected pulses in an energy  window and an absolute digital representation of the intensity  count rate both corrected for dead time, input multiplexing  and multiple output buffering of the ratemeter to accommo­ date multiple channel signals, a feedback loop from said  ratemeter to provide display image enhancement, inhibit cir­ cuitry to eliminate background signals, signal averging cir­ cuitry to permit storage of multiple line scan of multiple single  channel analyser outputs in a multi-channel analyser for later  processing and display circuitry for displaying stored line  scans.  
</ABSTRACT>
<DESCRIPTION>
automatic energy dispersive x-ray fluorescence analysis apparatus the invention pertains to an automatic energy dispersive x-ray fluorescence analysing apparatus, and in particular to the processing of data collected by an electron microscope having scanning facilities and the presentation and storage for meaningful analysis and use both on-line and off-line of the data. specifically, the apparatus embraces a ratemeter which gives a voltage output proportional to the intensity of the energy window or windows under consideration and additionally an output which is an absolute digital representation of the inten sity count rate. such apparatus are kno from an article entitled "a comparison of wavelength dispersive and energy dispersive x-ray fluorescent analysis" by r jenkins in the edax editor vol. 8 no. 2 april 1978 pages 6-10. in such apparatus some drawbacks in the dato handling occur. the most common mode of obtaining and presenting an elemental line scan has been to use an analog, or r-s ratemeter, whose input is all of the signal pulses passed by a single channel analyzer. this could be a separate analog module with upper and lower level dscrimnators, as used in most wavelength-dispersive microprobes, but is more often now a digitally-set energy "window" of "regionof-inteest" in the multichannel analyzer memory, the ratemeter uses a resister-capacitor circui to continuously tame average the rate of pulses. the output voltage, in addition to producing a-meter deflection and sometimes as audibly signal, can be amplified to drive the vertical deflection axis of the sem display scope as the beam is slowly scanned along a line across the sample. this method has the advantage that the information may 9 readily superimposed (usually or photographically) on to normal sem picture, so it is easy to judge the correspondence between positions where measured intensity changes occur and features of interest on the specimen. however, there are several common problems with this mode. one lies in the distortion introduced by the r-c circuit, which can cause "tailing" following abrupt changes or mask small changes if the time constant of the r-c circuit is too great, and allow annoying broadening of the line due to statistical fluctuations. the rate and scanning speed for a given measurement can be difficult b achieve. somewhat less obvious but in the long run more serious problems in the analog line scan arise from the fact that it is commonly interpreted as a plot of elemental concentration, but is actually a plot of intensity, and measured intensity at that. changes in sample surface orientation cause such a large change in intensity as to make the line scan meaningless, yet line scans across large irregular particles resting on a substrate are routinely shown to demonstrate the presence of an element. since the signal which is counted is not just the characteristic x-rays but the continuum falling in the same energy window, it is sometimes possible to record a visually convincing line scan for an element not present at all, if the particle, either because of its surface orientation or density,
</DESCRIPTION>
<CLAIMS>
claims:   1. a- system for improved line scan and x-ray map enhancement of scanning electron microscope data for use with computer controlled collection and processing of energy dispersive x-ray data comprising:  an energy dispersive x-ray detecting unit;  a preamplifier/amplifier which amplifies and pulse shapes pulses from said detecting unit;  a fast discriminator unit which forms a fast discriminator pulse for each incoming pulse into said preamplifier/amplifier, such that the fast discriminator pulses may be counted to give an absolute count of the input pulses to said preamplifier/amplifier;  an analog-to-digital converter to digitize a portion of the output pulses of said amplifier, the remaining pulses being rejected; ;  a multi-channel analyzer memory unit addressed by said digitized pulses to store the count of said digitized pulses, the address being a function of the energy of the incoming x-ray event;  said multi-channel analyzer memory further including a portion   which    stores attributes of energy levels for setting energy windows for analyses;  a single channel analyzer pulse shaper which receives pulses from said multi-channel analyzer memory upon receipt of a pulse in the energy window set by the  attribute bits of said multi-channel analyzer memory;  a fast descriminator scaler which serves to count the fast discriminator pulses from said fast discriminator   un-.t; ;     a stored pulse scaler which counts each pulse stored signal generated by said analog-to-digital convertert  a single channel analyzer pulse scaler which counts pulses from said single channel analyzer pulse shaper;  a plurality of scaler buffers to serve as temporary storage for the outputs of said fast discriminator scaler, said stored pulse scaler and said single channel analyzer pulse scaler;  timing circuitry to control the periodic transfer of data from said scalers to said scaler buffers and to reset said scalers, the timing of said timing circuitry being dependent upon integration times requested by the uses of said system;  means to compute a number equivalent to the dead time corrected intensity level as a count rate, being digitally integrating dead time correction circuitry;  an intensity buffer to receive the calculated corrected intensity; ;  means to output the contents of said intensity buffer which is a digital representation of a single channel analyzer intensity;  a digital-to-analog converter to receive said digital representation of the single analyzer channel intensity and convert said digital representation into an analog representation of intensity count rate in countsper-live-second;  means to output said analog representation of intensity count rate for use as a video deflection signal on the   basis    of the display of a scanning electron microscope thus creating an x-ray line scan.      the    system of claim 1 further comprising:  multiple single channel analyzer circuits, the outputs of said multiple single channel analyzer circuits representing multiple single channel outputs from said  multiple channel analyzer memory;  multiple single channel analyzer scalers, the number of said scalers being equal to the number of said single channel analyzer circuits;  multiplexer circuitry for selecting one or more of said single channel analyzer scaler inputs on a sequential basis to feed the contents thereof under the control of said timing circuitry into said digitally integrating dead time correction circuitry;  switching circuitry to select under the control of said timing circuitry the output of said digital-to-analog converter for each of said single channel analyzer corrected intensities; ;  sample and hold circuitry in the form of an analog buffer one such circuit for each of said single channel analyzer inputs to hold said analog signals until required as a voltage for said line scan circuitry.   3. the system of claim 1 wherein the means for correction of dead time   whereby    the intensity is calculated as counts per live second comprises:  a digitally integrating dead time correction circuitry having as inputs;  the count from said fast discriminator scaler which is the total number of stored counts;  the time over which these counts has been accumulated from said timing circuitry;  the number of rejected counts determined by subtracting the number of digitized stored pulses from said stored pulse scaler from the number of fast discriminator counts in said fast discriminator scaler;  arithmetic circuitry to execute the equation; ;   =    = t (1 - (r/(s+r)), where s is the total number of stored   counts,      p    is the number of rejected counts, t is a corrected time, t is the live time and t gives resulting intensities in counts-per-live-second for each integration;  said dead time corrected count forming the basis of an input signal to be held in said intensity buffer.      the    system of claim 1 further including means to  enhance x-ray mapping, said means comprising:  a voltage threshold connected to the output of said digital-to-analog converter;  said voltage threshold adjusted by the user and normally corresponding to the count rate associated with background;  a voltage comparator having as inputs the voltage intensity from said digital-to-analog converter and the voltage threshold;  a pulse shaper which receives from the voltage comparator all voltages in excess of said voltage threshold;   id       .       an inhibit logic circuit;  combinatorial logic circuitry which gates said shaped pulses greater than the threshold level to said inhibit logic circuit to inhibit the output of one or more of said single channel analyzers, said threshold serving to gate the dot output such that a map of x-ray dots any dots occuring in a region   where    the count rate is below the threshold will not be passed to the scanning electron microscope display.   5. the system of the immediately previous claim 4 wherein:  one or more thresholds are set to inhibit one or more single channel analyzer outputs whereby the output from the single channel analyzer representing one element may be used to discriminate the output of another single channel analyzer representing another element, thereby providing an image which may be interpreted as an x-ray map of compounds instead of elements.   6. the system of claim 1 in which said digital integrating ratemeter functions to enhance patterns of element intensity distribution in x-ray dot maps further comprising:  multiple single channel analyzer outputs, each of which passes through said inhibit gates to scanning electron microscope circuitry for z modulation (brightness modulation) of said scanning electron microscope  display;  said inhibit channel aignais   @er    each chanulel being independently generated by sale compinatorial logic circuitry;  said   inhibiting    signal preventing the output of each respective single channel analyzer signal to said scanning electron microscope; ;  the y intensity   output    of said digital integrating ratemeter being an   analog    representation of the count rate of at least one of said single   channel    analyzer pulse trains;  said v intensity being compared in said voltage comparator with said user chosen threshold voltage;  the output of said voltage comparator being shaped in said pulser shaper to be at the correct logical   voltage    level for said logic circuitry.   7. the system of claim 1   herein    the output of said digital integrating ratemeter is used for the enhancement of x-ray dot maps further comprising;  means to enable the outputs   cf    a plurality of single channel analyzers to pass   through    said inhibit gates to the scanning electron microscope circuitry for the modulation (brightness modulation) of the scanning electron microscope display;  said inhibits signals for each channel being independently generated by said   logic    circuitry;  each of said inhibit signals preventing the output of its respective single channel analyzer signal to said scanning electron microscope;  the threshold intensity being provided by a digital comparison comprising:  :  a digital comparator;  a digital representation of a threshold count rate selected by said user   serving'    as one input for said digital comparator;  a digital intensity generated by said dead time correction circuitry serving as the other input to said digital comparator;     the   output    signal of said comparatn   being      tile    signal indicating that the threshold level is greater than the ratemeter intensity level  said combinatorial logic   circuit    then inhibiting all signal channel analyzer pulses below said threshold level in those single channel   analyzer      channels    selected by the user; ;  providing the means to enhance the output of any single channel analyzer by inhibiting its own intensity output resulting in the removal of extraneous background signals from said x-ray dot map, or in the removal of signals from one element in areas deficient in a second element to produce an image which   may    be interpreted as an x-ray map of compounds instead of elements.   8. the system as claimed in   laim      2    further   including      means to store multiple line scans ;1l sa- 4 milti-channel    analyzer memory, said means comprising;  circuitry to direct said dead   time    corrected value of counts-per-live-second   directl-y      fe    said digitally integrating ratemeter to said multi-channel analyzer memory.   9. the system as claimed in claim   8      wherein    multiple simultaneously but separately active energy windows in said multi-channel analyzer permit the simulaneous storing of multiple line scans for different elements or   energy      windows,    each one having at least one segment 10. the system as claimed in claim 9   wherein    said means further comprises:  a combinatorial   control    logic circuit;  first gating circuitry   which    receives under the control of said control logic a digital output from said intensity buffer;  digital calculation cirouitary   which    receives the digital output of said first gating circuitry and stores the results of its calculation in said mca memory;  second gating circuitry operating under the con   tro    of said -control logic   whic    recaives processed or stored inputs from said mca. memory and calculation circui  try; ;  said digital-to-analog convanten receiving said processed or stoed imputs for display on the display of said scanning electron mioroscopt  timing circuitry to synchronize the processing sorage and retrieval of said intensity data with said scanning electron   microscope      display    11. the system of claim 9 further including means to improve the statistical quality of stored and displayed lines scans   comprising;     multiple scan sweeps by said scanning electron; microscope by a pulse from said   sine    channel analyzer;  means to store in said multi-channel analyzer memory the data of each line scan;  calculation circuitry in   sajd    multi-channel analyzer to signal average the data from each of said line scans such that   with    each   scsse    sweep   t    new value is   averaged      with    prior data   x    u,: :. w appropriate weighting based on the   number    cf swespa;  said calculation   circuit    embodying means to execute the following equation   for      .aoh    sweep:   where    e the previously stored count rate value is   ro    and the new value is   rl,    than the subsequently   steed      value    from the nth sweep will be  (n-1) ro + 1 r1  n n 12. the system of claim   t1      wilereln    said means   for    storing line scan data comprises:  first gating circuitry which gates   7v    intonsity data from said   intensity    buffer to   sam    multi-channel analyzer memory;  said n intensity daa from a plurarity of single channel analyzers being routed sequartially  timing logic to time the routing of said data into said multi-channel analyzer in   synchronization    with said scanning electrom micressope display;  second gating means permitting the simultaneous displaying of said   s &     output data to said   digi@@@hrvo-     analog converter and thereafter to said scanning eletron microscope display; ;  said second gating   circlaitr-      scaling    stored intensity data   from    said   multi-channel    analyzer memory to said digital-to-analog converter and thereafter to said scanning electron microscope display;  said timing circuitry and said calculation circuitry of said multi-channel analyzer   serving    to signal average the y modulation of said scanning   electron    microscope display.   13. the system of claim 10 further comprising:  means to process multiple stored lines scans and means to display any arithmetic combination thereof;  said means providing the displaying of relationships between intensity   levels    of   varying    elements   and/c'    compounds, or compensating for   typograplilcal,    density or thickness variations   jifluencing    the   intensity    levels of one or more elements.   14. the system of claim 1 further including means to display stored line scan data, said   mean    comprising:  means to store said single   channel    analyzer data in alternate memory channels of the multi-channel analyzer;  means to display said stored data by retrieval from said multi-channel analyzer memory in digital   form     means to position and store said retrieved data in said buffered output   circuitry    of said digitally integrating ratemeter;  means to generate the output voltage in said digital-to-analog converter;  and means to output said voltage to the vertical deflection axis of the scanning electron microscope display.    15. a system for energy dispersive x-ray analysing having a digital computer, data input   means    data pulse processors, data memory means input/output interfaces, multichannel analyzer bus,   computer      bus    visual   display    means and a control and keyboard console wherein said programmable control panel comprises.   a plurality of function keys control at least one function of   salf     means associated with each of said function keys to indicate when a function controlled by said key is active;  an alterable display means   associated      iith    each of said keys to label each key   with      the      name    of the function which it currently   control,     means to change the function controlled by each   o: :p    said function keys as necessitated by the   programs    executed by said systems;  means to change the displayed labels for each of said function keys such that said labels correspond to functions which can be controlled by said function keys as required by said programmed system;  whereby said function keys initially contol the programs available in said energy dispersive analysis system as indicated by their associated label displays and subsequently control the options available to the user of said system at each branch of   thu    seleced program, said function keys being relabelled in their   associated    displays to indicate which functions they   control s    if any, at said branch, unrequired   functions:  :      ie;s    being   dissnabled    and unlabeled.  
</CLAIMS>
</TEXT>
</DOC>
